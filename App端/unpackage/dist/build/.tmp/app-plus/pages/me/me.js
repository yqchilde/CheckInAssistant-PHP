(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me/me"],{1759:function(t,e,a){"use strict";a.r(e);var o=a("2bb3"),n=a("8089");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("8a7a");var r=a("2877"),i=Object(r["a"])(n["default"],o["a"],o["b"],!1,null,null,null);e["default"]=i.exports},"2bb3":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return n})},"3f04":function(t,e,a){"use strict";(function(t){var a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{userId:"",phoneNumber:"",realName:"",email:"",className:"",regTime:"",nameModalShow:null,userModalShow:null,classModalShow:null,emailModalShow:null,pwdModalShow:null}},onLoad:function(){var e=this;a=this;var o=this.checkLogin("../me/me",1);if(o){var n=t.getStorageSync("USERID"),s=t.getStorageSync("PHONENUMBER");t.request({url:a.apiServer+"user&m=getUserInfo",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{userid:n,phoneNumber:s},success:function(a){if(a=a.data,"ok"==a.status){e.userId=a.data.userid,e.phoneNumber=a.data.phoneNumber,e.realName=a.data.realname,e.email=a.data.email,e.className=a.data.class;var o=new Date(1e3*a.data.regtime);e.regTime=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()+" "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()}else"error"==a.status&&t.showToast({title:a.data})}})}},methods:{nameModal:function(t){this.nameModalShow=t.currentTarget.dataset.target},nameHide:function(t){this.nameModalShow=null},userModal:function(t){this.userModalShow=t.currentTarget.dataset.target},userHide:function(t){this.userModalShow=null},classModal:function(t){this.classModalShow=t.currentTarget.dataset.target},classHide:function(t){this.classModalShow=null},emailModal:function(t){this.emailModalShow=t.currentTarget.dataset.target},emailHide:function(t){this.emailModalShow=null},pwdModal:function(t){this.pwdModalShow=t.currentTarget.dataset.target},pwdHide:function(t){this.pwdModalShow=null},formEditName:function(e){var o=this,n=t.getStorageSync("USERID"),s=e.detail.value.realName,r=/^[\u4e00-\u9fa5]{2,4}$/;return""==s?(t.showToast({title:"姓名不能为空",icon:"none"}),!1):r.test(s)?void t.request({url:a.apiServer+"user&m=editName",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{userId:n,realName:s},success:function(e){e=e.data,"ok"==e.status?(t.showToast({title:e.data,icon:"none"}),o.realName=s,t.getStorageSync("realName")&&t.removeStorageSync("realName"),t.setStorageSync("realName",s)):"error"==e.status&&t.showToast({title:e.data,icon:"none"})}}):(t.showToast({title:"请输入汉字,且长度为2-4位",icon:"none"}),!1)},formSetClass:function(e){var o=this,n=t.getStorageSync("USERID"),s=e.detail.value.class;if(""==s)return t.showToast({title:"班级不能为空",icon:"none"}),!1;t.request({url:a.apiServer+"user&m=setClass",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{userId:n,className:s},success:function(e){e=e.data,"ok"==e.status?(t.showToast({title:e.data,icon:"none"}),o.className=s):"error"==e.status&&t.showToast({title:e.data,icon:"none"})}})},formSetEmail:function(e){var o=this,n=t.getStorageSync("USERID"),s=e.detail.value.email,r=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return""==s?(t.showToast({title:"邮箱不能为空",icon:"none"}),!1):r.test(s)?void t.request({url:a.apiServer+"user&m=setEmail",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{userId:n,email:s},success:function(e){e=e.data,"ok"==e.status?(t.showToast({title:e.data,icon:"none"}),o.email=s):"error"==e.status&&t.showToast({title:e.data,icon:"none"})}}):(t.showToast({title:"邮箱格式不正确",icon:"none"}),!1)},formEditPwd:function(e){var o=t.getStorageSync("USERID"),n=t.getStorageSync("PHONENUMBER"),s=e.detail.value.newpwd,r=e.detail.value.renewpwd,i=/^(\w){8,16}$/;return""==s?(t.showToast({title:"密码不能为空",icon:"none",position:"bottom"}),!1):i.test(s)?r!=s?(t.showToast({title:"两次密码不一致",icon:"none",position:"bottom"}),!1):void t.request({url:a.apiServer+"user&m=editPwd",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{userId:o,phoneNumber:n,newpwd:s},success:function(e){e=e.data,"ok"==e.status?(t.showToast({title:e.data,icon:"none"}),setTimeout(function(e){t.reLaunch({url:"../login/login"})},1e3)):"error"==e.status&&t.showToast({title:e.data,icon:"none"})}}):(t.showToast({title:"密码为8到16位",icon:"none",position:"bottom"}),!1)},backIndex:function(){t.navigateBack({delta:1})},shareFid:function(){t.request({url:a.apiServer+"user&m=shareDown",method:"GET",data:{},success:function(e){e=e.data,"ok"==e.status&&t.setClipboardData({data:e.data,success:function(){t.showToast({title:"已成功复制下载地址",icon:"none",position:"bottom"})}})}})}}};e.default=o}).call(this,a("6e42")["default"])},8089:function(t,e,a){"use strict";a.r(e);var o=a("3f04"),n=a.n(o);for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);e["default"]=n.a},"8a7a":function(t,e,a){"use strict";var o=a("df1a"),n=a.n(o);n.a},df1a:function(t,e,a){}},[["7256","common/runtime","common/vendor"]]]);